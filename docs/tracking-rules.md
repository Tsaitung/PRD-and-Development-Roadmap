# 菜蟲農食 ERP 系統 - 模組追蹤規則文件

## 概述
本文件定義了 ERP 系統中模組狀態判定的標準規則，確保所有團隊成員對模組開發狀態有一致的理解。

## 模組狀態定義

### 狀態圖例
- ✅ 完成
- 🟡 開發中
- 🔴 未開始
- ⚪ 規劃中
- 🔄 轉移中
- ⏸️ 待轉移
- ❓ 未知（待釐清）

## 核心判定規則

### 1. 新系統開發狀態判定

#### 🔴 未開始 (Not Started)
模組必須滿足以下**任一**條件：
- 沒有對應的 PRD 文件（prd.md 或 README.md）
- 只確認有舊系統運行，但尚未開始新系統開發
- PRD 狀態為「規劃中」(⚪)

#### 🟡 開發中 (In Development)
模組必須滿足以下**所有**條件：
1. 存在有效的 PRD 文件：
   - 有 `prd.md` 文件（優先）或
   - 有 `README.md` 文件（舊標準）
2. PRD 文件內容充實（> 500 字元）
3. 已開始實際開發工作

#### ✅ 完成 (Completed)
模組必須滿足以下**所有**條件：
1. PRD 文件完整且詳盡
2. 所有功能需求已實作
3. 通過單元測試和整合測試
4. 已部署上線

### 2. PRD 完成度判定

#### ⚪ 規劃中 (Planning)
- 資料夾存在但沒有 PRD 文件
- 或 PRD 文件內容不足 500 字元

#### 🟡 開發中 (In Progress)
- 存在 README.md 文件且內容充實
- 或存在 prd.md 但內容尚未完整

#### ✅ 完成 (Completed)
- 存在 prd.md 文件且內容完整（> 500 字元）
- 包含所有必要章節（功能需求、驗收標準等）

## PRD 文件要求

### 必要文件
每個模組資料夾應包含以下文件之一：
1. **prd.md**（新標準，優先採用）
2. **README.md**（舊標準，逐步淘汰）

### PRD 文件結構
完整的 PRD 文件應包含：
- 模組資訊（代碼、名稱、負責人、版本）
- 模組概述
- 業務價值
- 功能需求（FR-XXX 格式）
- 驗收標準
- 非功能需求
- 數據模型
- API 設計
- 實施計畫
- 變更記錄

## 狀態轉換條件

### 未開始 → 開發中
1. 創建 PRD 文件（prd.md 或 README.md）
2. PRD 內容達到基本要求（> 500 字元）
3. 開始實際編碼工作

### 開發中 → 完成
1. 所有功能需求實作完成
2. 通過所有測試
3. 文檔更新完整
4. 成功部署上線

## 舊系統轉移狀態

### ⏸️ 待轉移 (Pending Migration)
- 舊系統仍在運行
- 新系統尚未開始開發
- 需要規劃轉移策略

### 🔄 轉移中 (Migrating)
- 舊系統部分功能已開始轉移
- 新舊系統可能並行運作
- 正在進行資料遷移或功能重構

### ✅ 已轉移 (Migrated)
- 舊系統功能完全轉移到新系統
- 舊系統可以停用

### ❓ 未知（待釐清）
- 系統狀態不明確
- 需要進一步調查確認
- 可能是文檔缺失或溝通不足

## 子模組統計規則

### 統計方式
- 每個主模組顯示：`已完成/總數`
- 例如：`1/5` 表示5個子模組中有1個已完成
- 特殊說明：
  - CRM-PM 有13個子項需特別標註
  - PM-SRM 有5個子項需特別標註
  - FA-FS 有2個子項需特別標註

### 完成度計算
- 只有狀態為 ✅ 的子模組計入完成數
- 🟡 開發中的子模組不計入完成，但需標註
- 子項（如 CRM-PM 的13個子項）單獨統計

## 特殊情況處理

### 子模組 PRD
- 如果子模組有獨立的 PRD（如 SA-OBM），主模組狀態應反映子模組的最高狀態
- 例如：SA 模組因為 SA-OBM 有 PRD，所以 SA 的 PRD 狀態應為 ✅

### 舊系統存在但無 PRD
- 即使舊系統正在運行，如果沒有新系統的 PRD 文件，新系統狀態必須標記為「未開始」(🔴)
- 這確保了開發進度的準確性

### 單一模組處理
- UP (User Profile) 沒有子模組，標記為 N/A
- 直接追蹤主模組狀態即可

## 自動化檢測

系統使用 `check_module_status.py` 腳本自動檢測模組狀態：
1. 掃描 PRD 資料夾結構
2. 檢查 prd.md 和 README.md 文件
3. 驗證文件內容長度
4. 根據規則判定狀態
5. 更新 TOC Modules.md

## 更新頻率

- **自動更新**：每日 2 AM (UTC+8) 通過 GitHub Actions
- **手動更新**：使用 `enhanced_auto_sync.sh` 腳本
- **即時更新**：推送到 main/develop 分支時觸發

## 責任歸屬

- **產品團隊**：負責創建和維護 PRD 文件
- **開發團隊**：負責更新開發狀態和進度
- **QA 團隊**：負責更新測試狀態
- **DevOps**：負責更新部署和上線狀態

## 版本記錄

| 版本 | 日期 | 變更內容 | 作者 |
|------|------|----------|------|
| v1.0.0 | 2025-08-19 | 初始版本，建立基礎追蹤規則 | ERP Team |

---

**文件狀態**: 生效中
**下次審查日期**: 2025-09-01