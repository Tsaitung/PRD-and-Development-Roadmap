# ã€èˆŠç³»çµ±è½‰ç§»ã€‘FA-AR æ‡‰æ”¶å¸³æ¬¾ç®¡ç†æ¨¡çµ„ PRD

## è½‰ç§»è³‡è¨Š
- **ä¾†æºç³»çµ±**: tsaitung-dashboard-central (åŒ—å€)
- **åŸå§‹é é¢**: 
  - `/billing/` - å¸³å‹™ç®¡ç†
  - `/billing/[month]/` - æœˆçµå¸³å–®
  - `/billing/invoice/` - ç™¼ç¥¨ç®¡ç†
  - `/billing/payment/` - æ”¶æ¬¾è¨˜éŒ„
  - `/billing/statement/` - å°å¸³å–®
  - `/billing/aging/` - å¸³é½¡åˆ†æ
- **åŸå§‹ä»£ç¢¼ä½ç½®**: 
  - `/libs/tsaitung-dashboard/Billing/`
  - `/libs/tsaitung-dashboard/Invoice/`
  - `/libs/tsaitung-dashboard/Payment/`
- **è½‰ç§»é¡å‹**: åŠŸèƒ½ä¿ç•™å‹è½‰ç§»
- **è½‰ç§»å„ªå…ˆç´š**: P1-é«˜ï¼ˆè²¡å‹™æ ¸å¿ƒï¼‰
- **æœ€å¾Œæ›´æ–°**: 2025-08-20

## æ¨¡çµ„è³‡è¨Š
- **æ¨¡çµ„ä»£ç¢¼**: FA-AR
- **æ¨¡çµ„åç¨±**: æ‡‰æ”¶å¸³æ¬¾ç®¡ç† (Accounts Receivable)
- **è² è²¬äºº**: [å¾…æŒ‡æ´¾]
- **ç‰ˆæœ¬**: v1.0.0-migration

## æ¨¡çµ„æ¦‚è¿°
æ‡‰æ”¶å¸³æ¬¾ç®¡ç†æ¨¡çµ„æ˜¯è²¡å‹™ç³»çµ±çš„æ ¸å¿ƒçµ„ä»¶ï¼Œè² è²¬ç®¡ç†å®¢æˆ¶å¸³æ¬¾ã€é–‹ç«‹ç™¼ç¥¨ã€æ”¶æ¬¾è™•ç†ã€å°å¸³ä½œæ¥­ã€å¸³é½¡åˆ†æç­‰åŠŸèƒ½ã€‚ç¢ºä¿ç¾é‡‘æµç®¡ç†å’Œè²¡å‹™å¥åº·ã€‚

## èˆŠç³»çµ±åŠŸèƒ½åˆ†æ

### ç¾æœ‰åŠŸèƒ½æ¸…å–®

#### å¸³å–®ç®¡ç†åŠŸèƒ½
1. **æœˆçµä½œæ¥­**
   - è‡ªå‹•ç”¢ç”Ÿæœˆçµå¸³å–®
   - è¨‚å–®å½™ç¸½è¨ˆç®—
   - é‹è²»è¨ˆç®—
   - æŠ˜æ‰£è™•ç†

2. **å¸³å–®æŸ¥è©¢**
   - ä¾å®¢æˆ¶æŸ¥è©¢
   - ä¾æœŸé–“æŸ¥è©¢
   - æœªçµæ¸…å–®
   - é€¾æœŸæ¸…å–®

3. **å¸³å–®èª¿æ•´**
   - é‡‘é¡èª¿æ•´
   - æŠ˜è®“è™•ç†
   - é€€è²¨æ‰£æ¬¾
   - è£œé–‹å¸³å–®

#### ç™¼ç¥¨ç®¡ç†åŠŸèƒ½
1. **ç™¼ç¥¨é–‹ç«‹**
   - äºŒè¯å¼ç™¼ç¥¨
   - ä¸‰è¯å¼ç™¼ç¥¨
   - é›»å­ç™¼ç¥¨
   - æ‰¹æ¬¡é–‹ç«‹

2. **ç™¼ç¥¨ä½œæ¥­**
   - ä½œå»¢è™•ç†
   - æŠ˜è®“å–®é–‹ç«‹
   - ç™¼ç¥¨è£œå°
   - ç™¼ç¥¨æŸ¥è©¢

3. **é›»å­ç™¼ç¥¨**
   - ä¸Šå‚³è²¡æ”¿éƒ¨
   - è¼‰å…·ç®¡ç†
   - ä¸­çå°ç

#### æ”¶æ¬¾ç®¡ç†åŠŸèƒ½
1. **æ”¶æ¬¾ç™»éŒ„**
   - ç¾é‡‘æ”¶æ¬¾
   - åŒ¯æ¬¾æ”¶æ¬¾
   - æ”¯ç¥¨æ”¶æ¬¾
   - ä¿¡ç”¨å¡æ”¶æ¬¾

2. **æ”¶æ¬¾æ ¸éŠ·**
   - è‡ªå‹•æ ¸éŠ·
   - æ‰‹å‹•åˆ†é…
   - éƒ¨åˆ†ä»˜æ¬¾
   - é æ”¶è™•ç†

3. **æ”¶æ¬¾è¿½è¹¤**
   - å¾…æ”¶æ¬¾é …
   - æ”¶æ¬¾é€²åº¦
   - å‚¬æ”¶æé†’

#### å°å¸³ä½œæ¥­åŠŸèƒ½
1. **å®¢æˆ¶å°å¸³**
   - å°å¸³å–®ç”¢ç”Ÿ
   - å·®ç•°åˆ†æ
   - å°å¸³ç¢ºèª

2. **éŠ€è¡Œå°å¸³**
   - å…¥å¸³ç¢ºèª
   - é¤˜é¡æ ¸å°
   - ç•°å¸¸è™•ç†

#### å¸³é½¡åˆ†æåŠŸèƒ½
1. **å¸³é½¡å ±è¡¨**
   - 30/60/90å¤©åˆ†æ
   - å®¢æˆ¶ä¿¡ç”¨åˆ†æ
   - é€¾æœŸçµ±è¨ˆ

2. **é¢¨éšªç®¡ç†**
   - ä¿¡ç”¨é¡åº¦æ§åˆ¶
   - é€¾æœŸè­¦ç¤º
   - å£å¸³è©•ä¼°

### ä¿ç•™èˆ‡æ”¹é€²

#### éœ€ä¿ç•™åŠŸèƒ½
- å®Œæ•´çš„æœˆçµæµç¨‹
- å¤šç¨®ç™¼ç¥¨æ ¼å¼æ”¯æ´
- éˆæ´»çš„æ”¶æ¬¾æ ¸éŠ·
- è‡ªå‹•å°å¸³æ©Ÿåˆ¶
- å¸³é½¡åˆ†æå ±è¡¨
- ä¿¡ç”¨æ§åˆ¶åŠŸèƒ½

#### è¨ˆåŠƒæ”¹é€²é …ç›®
- AIé æ¸¬æ”¶æ¬¾
- è‡ªå‹•å‚¬æ”¶æµç¨‹
- ç·šä¸Šå°å¸³å¹³å°
- å³æ™‚ä¿¡ç”¨è©•ä¼°
- å€å¡Šéˆç™¼ç¥¨
- å¤šå¹£åˆ¥æ”¯æ´
- é‡‘æµä¸²æ¥å„ªåŒ–
- æ™ºèƒ½æ ¸éŠ·å»ºè­°

## åŠŸèƒ½éœ€æ±‚

### FR-FA-AR-001: æœˆçµå¸³å–®ç”¢ç”Ÿ
**ç‹€æ…‹**: ğŸŸ¡ é–‹ç™¼ä¸­
**å„ªå…ˆç´š**: P1

**åŠŸèƒ½æè¿°**:
æ¯æœˆè‡ªå‹•æˆ–æ‰‹å‹•ç”¢ç”Ÿå®¢æˆ¶å¸³å–®ï¼Œå½™ç¸½ç•¶æœˆäº¤æ˜“ä¸¦è¨ˆç®—æ‡‰æ”¶é‡‘é¡ã€‚

**åŠŸèƒ½éœ€æ±‚ç´°ç¯€**:
- **æ¢ä»¶/è§¸ç™¼**: æœˆåº•çµå¸³æˆ–æ‰‹å‹•åŸ·è¡Œ
- **è¡Œç‚º**: ç”¢ç”Ÿæœˆçµå¸³å–®
- **è³‡æ–™è¼¸å…¥**: 
  - çµå¸³æœˆä»½
  - å®¢æˆ¶ç¯„åœ
  - è¨‚å–®å€é–“
  - è¨ˆåƒ¹è¦å‰‡
  - é‹è²»è¨­å®š
- **è³‡æ–™è¼¸å‡º**: 
  - æœˆçµå¸³å–®
  - æ˜ç´°æ¸…å–®
  - ç™¼ç¥¨è³‡æ–™
  - æ‡‰æ”¶ç¸½é¡
- **UIåæ‡‰**: é€²åº¦é¡¯ç¤ºã€é è¦½ç¢ºèª
- **ä¾‹å¤–è™•ç†**: ç•°å¸¸è¨‚å–®æç¤ºã€é‡‘é¡æª¢æ ¸

**é©—æ”¶æ¨™æº–**:
```yaml
- æ¢ä»¶: åŸ·è¡Œæœˆçµä½œæ¥­
  é æœŸçµæœ: ç”¢ç”Ÿæ‰€æœ‰å®¢æˆ¶çš„æœˆçµå¸³å–®
  
- æ¢ä»¶: æœ‰é€€è²¨æˆ–æŠ˜è®“
  é æœŸçµæœ: æ­£ç¢ºæ‰£æ¸›æ‡‰æ”¶é‡‘é¡
  
- æ¢ä»¶: ç‰¹æ®Šè¨ˆåƒ¹å®¢æˆ¶
  é æœŸçµæœ: å¥—ç”¨å®¢è£½åŒ–åƒ¹æ ¼
```

**æŠ€è¡“éœ€æ±‚**:
- **API ç«¯é»**: `POST /api/v1/billing/monthly-close`
- **è«‹æ±‚åƒæ•¸**:
  ```json
  {
    "billing_month": "2025-08",
    "customer_ids": ["CUS_001", "CUS_002"],
    "include_shipping": true,
    "auto_invoice": true
  }
  ```

### FR-FA-AR-002: ç™¼ç¥¨é–‹ç«‹ç®¡ç†
**ç‹€æ…‹**: ğŸŸ¡ é–‹ç™¼ä¸­
**å„ªå…ˆç´š**: P1

**åŠŸèƒ½æè¿°**:
é–‹ç«‹å„é¡å‹ç™¼ç¥¨ï¼Œæ”¯æ´é›»å­ç™¼ç¥¨ä¸Šå‚³å’Œç®¡ç†ã€‚

**åŠŸèƒ½éœ€æ±‚ç´°ç¯€**:
- **æ¢ä»¶/è§¸ç™¼**: å¸³å–®ç¢ºèªå¾Œé–‹ç«‹ç™¼ç¥¨
- **è¡Œç‚º**: ç”¢ç”Ÿä¸¦å„²å­˜ç™¼ç¥¨
- **è³‡æ–™è¼¸å…¥**: 
  - ç™¼ç¥¨é¡å‹
  - è²·å—äººè³‡è¨Š
  - å“é …æ˜ç´°
  - ç¨…é¡è¨ˆç®—
  - è¼‰å…·è³‡è¨Š
- **è³‡æ–™è¼¸å‡º**: 
  - ç™¼ç¥¨è™Ÿç¢¼
  - ç™¼ç¥¨æª”æ¡ˆ
  - QR Code
  - ä¸Šå‚³ç‹€æ…‹
- **UIåæ‡‰**: å³æ™‚é è¦½ã€æ‰¹æ¬¡è™•ç†
- **ä¾‹å¤–è™•ç†**: è™Ÿç¢¼é‡è¤‡æª¢æŸ¥ã€æ ¼å¼é©—è­‰

### FR-FA-AR-003: æ”¶æ¬¾è™•ç†ä½œæ¥­
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P1

**åŠŸèƒ½æè¿°**:
ç™»éŒ„å®¢æˆ¶ä»˜æ¬¾ä¸¦åŸ·è¡Œå¸³æ¬¾æ ¸éŠ·ä½œæ¥­ã€‚

**åŠŸèƒ½éœ€æ±‚ç´°ç¯€**:
- **æ¢ä»¶/è§¸ç™¼**: æ”¶åˆ°å®¢æˆ¶ä»˜æ¬¾
- **è¡Œç‚º**: ç™»éŒ„æ”¶æ¬¾ä¸¦æ ¸éŠ·å¸³æ¬¾
- **è³‡æ–™è¼¸å…¥**: 
  - ä»˜æ¬¾æ–¹å¼
  - ä»˜æ¬¾é‡‘é¡
  - ä»˜æ¬¾æ—¥æœŸ
  - éŠ€è¡Œå¸³è™Ÿ
  - æ ¸éŠ·å¸³å–®
- **è³‡æ–™è¼¸å‡º**: 
  - æ”¶æ¬¾å–®æ“š
  - æ ¸éŠ·è¨˜éŒ„
  - é¤˜é¡æ›´æ–°
- **UIåæ‡‰**: è‡ªå‹•åŒ¹é…å»ºè­°ã€é¤˜é¡é¡¯ç¤º
- **ä¾‹å¤–è™•ç†**: æº¢æ”¶è™•ç†ã€çŸ­æ”¶æé†’

### FR-FA-AR-004: å®¢æˆ¶å°å¸³ä½œæ¥­
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P2

**åŠŸèƒ½æè¿°**:
ç”¢ç”Ÿå®¢æˆ¶å°å¸³å–®ï¼Œç¢ºèªå¸³æ¬¾é¤˜é¡æ­£ç¢ºã€‚

**åŠŸèƒ½éœ€æ±‚ç´°ç¯€**:
- **æ¢ä»¶/è§¸ç™¼**: å®šæœŸæˆ–å®¢æˆ¶è¦æ±‚
- **è¡Œç‚º**: ç”¢ç”Ÿå°å¸³å–®
- **è³‡æ–™è¼¸å…¥**: 
  - å°å¸³æœŸé–“
  - å®¢æˆ¶é¸æ“‡
  - åŒ…å«é …ç›®
- **è³‡æ–™è¼¸å‡º**: 
  - å°å¸³å–®
  - äº¤æ˜“æ˜ç´°
  - é¤˜é¡ç¢ºèª
- **UIåæ‡‰**: PDFç”Ÿæˆã€éƒµä»¶ç™¼é€
- **ä¾‹å¤–è™•ç†**: å·®ç•°æ¨™ç¤ºã€èª¿ç¯€èªªæ˜

### FR-FA-AR-005: å¸³é½¡åˆ†æå ±è¡¨
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P2

**åŠŸèƒ½æè¿°**:
åˆ†ææ‡‰æ”¶å¸³æ¬¾çš„å¸³é½¡åˆ†å¸ƒï¼Œè©•ä¼°æ”¶æ¬¾é¢¨éšªã€‚

**åŠŸèƒ½éœ€æ±‚ç´°ç¯€**:
- **æ¢ä»¶/è§¸ç™¼**: å®šæœŸå ±è¡¨æˆ–æŸ¥è©¢
- **è¡Œç‚º**: è¨ˆç®—å¸³é½¡ä¸¦åˆ†é¡
- **è³‡æ–™è¼¸å…¥**: 
  - åˆ†ææ—¥æœŸ
  - å¸³é½¡å€é–“è¨­å®š
  - å®¢æˆ¶ç¯©é¸
- **è³‡æ–™è¼¸å‡º**: 
  - å¸³é½¡åˆ†å¸ƒè¡¨
  - é€¾æœŸæ¸…å–®
  - é¢¨éšªè©•ä¼°
  - å‚¬æ”¶å»ºè­°
- **UIåæ‡‰**: åœ–è¡¨é¡¯ç¤ºã€åŒ¯å‡ºExcel
- **ä¾‹å¤–è™•ç†**: å£å¸³é è­¦

### FR-FA-AR-006: ä¿¡ç”¨é¡åº¦ç®¡ç†
**ç‹€æ…‹**: âšª è¦åŠƒä¸­
**å„ªå…ˆç´š**: P3

**åŠŸèƒ½æè¿°**:
ç®¡ç†å®¢æˆ¶ä¿¡ç”¨é¡åº¦ï¼Œæ§åˆ¶è³’éŠ·é¢¨éšªã€‚

**åŠŸèƒ½éœ€æ±‚ç´°ç¯€**:
- **æ¢ä»¶/è§¸ç™¼**: è¨‚å–®å»ºç«‹æˆ–é¡åº¦æª¢æŸ¥
- **è¡Œç‚º**: è©•ä¼°ä¸¦æ§åˆ¶ä¿¡ç”¨
- **è³‡æ–™è¼¸å…¥**: 
  - ä¿¡ç”¨é¡åº¦è¨­å®š
  - ä»˜æ¬¾è¨˜éŒ„
  - é€¾æœŸå¤©æ•¸
- **è³‡æ–™è¼¸å‡º**: 
  - å¯ç”¨é¡åº¦
  - é¢¨éšªè©•ç´š
  - æ§åˆ¶å»ºè­°
- **UIåæ‡‰**: å³æ™‚é¡åº¦é¡¯ç¤ºã€è¶…é¡è­¦å‘Š
- **ä¾‹å¤–è™•ç†**: é¡åº¦å‡çµã€ç‰¹æ‰¹æµç¨‹

## æ•¸æ“šæ¨¡å‹

### ä¸»è¦å¯¦é«”
```typescript
// å¸³å–®å¯¦é«”
interface Bill {
  bill_id: string;
  bill_no: string;
  customer_id: string;
  customer_name: string;
  
  // å¸³å–®è³‡è¨Š
  billing_month: string;
  billing_date: Date;
  due_date: Date;
  
  // é‡‘é¡è³‡è¨Š
  subtotal: number;
  shipping_fee: number;
  discount_amount: number;
  tax_amount: number;
  total_amount: number;
  paid_amount: number;
  balance: number;
  
  // ç‹€æ…‹
  status: 'draft' | 'confirmed' | 'invoiced' | 'paid' | 'overdue';
  
  // æ˜ç´°
  items: BillItem[];
  
  created_by: string;
  created_at: Date;
  updated_at: Date;
}

// å¸³å–®æ˜ç´°
interface BillItem {
  item_id: string;
  bill_id: string;
  order_id: string;
  order_date: Date;
  product_name: string;
  quantity: number;
  unit_price: number;
  amount: number;
}

// ç™¼ç¥¨å¯¦é«”
interface Invoice {
  invoice_id: string;
  invoice_no: string;
  invoice_date: Date;
  
  // é—œè¯è³‡è¨Š
  bill_id?: string;
  customer_id: string;
  
  // ç™¼ç¥¨è³‡è¨Š
  invoice_type: 'B2B' | 'B2C';
  tax_id?: string;
  
  // é‡‘é¡
  sales_amount: number;
  tax_amount: number;
  total_amount: number;
  
  // é›»å­ç™¼ç¥¨
  einvoice_code?: string;
  carrier_type?: string;
  carrier_id?: string;
  
  status: 'valid' | 'void' | 'allowance';
  
  created_at: Date;
  void_date?: Date;
  void_reason?: string;
}

// æ”¶æ¬¾è¨˜éŒ„
interface Payment {
  payment_id: string;
  payment_no: string;
  
  // å®¢æˆ¶è³‡è¨Š
  customer_id: string;
  customer_name: string;
  
  // ä»˜æ¬¾è³‡è¨Š
  payment_date: Date;
  payment_method: 'cash' | 'transfer' | 'check' | 'credit_card';
  payment_amount: number;
  
  // éŠ€è¡Œè³‡è¨Š
  bank_code?: string;
  bank_account?: string;
  check_no?: string;
  
  // æ ¸éŠ·è³‡è¨Š
  allocated_amount: number;
  unallocated_amount: number;
  allocations: PaymentAllocation[];
  
  status: 'pending' | 'confirmed' | 'allocated';
  
  notes?: string;
  created_by: string;
  created_at: Date;
}

// ä»˜æ¬¾åˆ†é…
interface PaymentAllocation {
  allocation_id: string;
  payment_id: string;
  bill_id: string;
  allocated_amount: number;
  allocation_date: Date;
}

// å°å¸³å–®
interface Statement {
  statement_id: string;
  customer_id: string;
  statement_date: Date;
  
  // æœŸé–“
  period_start: Date;
  period_end: Date;
  
  // é¤˜é¡è³‡è¨Š
  beginning_balance: number;
  total_charges: number;
  total_payments: number;
  ending_balance: number;
  
  // æ˜ç´°
  transactions: StatementTransaction[];
  
  // ç¢ºèª
  confirmed: boolean;
  confirmed_by?: string;
  confirmed_at?: Date;
  
  created_at: Date;
}

// å¸³é½¡åˆ†æ
interface AgingAnalysis {
  analysis_id: string;
  analysis_date: Date;
  customer_id: string;
  
  // å¸³é½¡åˆ†å¸ƒ
  current: number;
  days_30: number;
  days_60: number;
  days_90: number;
  over_90: number;
  
  total_outstanding: number;
  
  // é¢¨éšªè©•ä¼°
  risk_level: 'low' | 'medium' | 'high';
  credit_limit: number;
  available_credit: number;
}
```

## æ•¸æ“šé·ç§»ç­–ç•¥

### é·ç§»æ–¹å¼
- **ç­–ç•¥**: æ­·å²è³‡æ–™æ‰¹æ¬¡é·ç§» + æ–°è³‡æ–™é›™å¯«
- **éšæ®µ**: 
  1. ç¬¬ä¸€éšæ®µï¼šé·ç§»å®¢æˆ¶ä¸»æª”å’Œä¿¡ç”¨è³‡æ–™ï¼ˆ3å¤©ï¼‰
  2. ç¬¬äºŒéšæ®µï¼šé·ç§»è¿‘6å€‹æœˆå¸³å–®å’Œç™¼ç¥¨ï¼ˆ1é€±ï¼‰
  3. ç¬¬ä¸‰éšæ®µï¼šé·ç§»æ‰€æœ‰æ­·å²è³‡æ–™ï¼ˆ2é€±ï¼‰
  4. ç¬¬å››éšæ®µï¼šå¹³è¡Œé‹è¡Œå’Œé©—è­‰ï¼ˆ1é€±ï¼‰

### æ•¸æ“šæ˜ å°„
| èˆŠç³»çµ±æ¬„ä½ | æ–°ç³»çµ±æ¬„ä½ | è½‰æ›è¦å‰‡ |
|-----------|-----------|----------|
| invoice_id | invoice_no | ä¿ç•™åŸå§‹ç·¨è™Ÿ |
| client_id | customer_id | å®¢æˆ¶IDæ˜ å°„ |
| total_price | total_amount | é‡‘é¡æ¬„ä½çµ±ä¸€ |
| payment_status | status | ç‹€æ…‹å€¼å°æ‡‰ |
| billing_date | invoice_date | æ—¥æœŸæ ¼å¼çµ±ä¸€ |

### ç›¸å®¹æ€§è™•ç†
- ä¿ç•™åŸå§‹å–®æ“šç·¨è™Ÿ
- æ”¯æ´æ–°èˆŠå ±è¡¨æ ¼å¼
- æä¾›æ­·å²æŸ¥è©¢ä»‹é¢

## API è¨­è¨ˆ

### API ç«¯é»åˆ—è¡¨
| æ–¹æ³• | ç«¯é» | æè¿° | ç‹€æ…‹ |
|------|------|------|------|
| POST | `/api/v1/billing/monthly-close` | æœˆçµä½œæ¥­ | ğŸŸ¡ é–‹ç™¼ä¸­ |
| GET | `/api/v1/billing/bills` | å¸³å–®æŸ¥è©¢ | ğŸ”´ æœªé–‹å§‹ |
| POST | `/api/v1/billing/invoices` | é–‹ç«‹ç™¼ç¥¨ | ğŸ”´ æœªé–‹å§‹ |
| POST | `/api/v1/billing/payments` | ç™»éŒ„æ”¶æ¬¾ | ğŸ”´ æœªé–‹å§‹ |
| POST | `/api/v1/billing/allocate` | ä»˜æ¬¾æ ¸éŠ· | ğŸ”´ æœªé–‹å§‹ |
| GET | `/api/v1/billing/statements` | å°å¸³å–® | ğŸ”´ æœªé–‹å§‹ |
| GET | `/api/v1/billing/aging` | å¸³é½¡åˆ†æ | ğŸ”´ æœªé–‹å§‹ |
| POST | `/api/v1/billing/void-invoice` | ä½œå»¢ç™¼ç¥¨ | ğŸ”´ æœªé–‹å§‹ |
| GET | `/api/v1/billing/credit-status` | ä¿¡ç”¨æŸ¥è©¢ | ğŸ”´ æœªé–‹å§‹ |

### è«‹æ±‚/éŸ¿æ‡‰ç¯„ä¾‹
```json
// POST /api/v1/billing/monthly-close
{
  "billing_month": "2025-08",
  "customer_type": "all",
  "auto_calculate_shipping": true,
  "generate_invoice": true
}

// Response
{
  "success": true,
  "data": {
    "total_bills": 150,
    "total_amount": 5680000,
    "invoices_generated": 150,
    "errors": [],
    "summary": {
      "customers_processed": 150,
      "orders_included": 3250,
      "average_bill_amount": 37866
    }
  }
}
```

## æ¸¬è©¦éœ€æ±‚

### å–®å…ƒæ¸¬è©¦
- [ ] é‡‘é¡è¨ˆç®—æ¸¬è©¦
- [ ] ç¨…é¡è¨ˆç®—æ¸¬è©¦
- [ ] æ ¸éŠ·é‚è¼¯æ¸¬è©¦
- [ ] å¸³é½¡è¨ˆç®—æ¸¬è©¦

### æ•´åˆæ¸¬è©¦
- [ ] å®Œæ•´æœˆçµæµç¨‹æ¸¬è©¦
- [ ] ç™¼ç¥¨é–‹ç«‹æµç¨‹æ¸¬è©¦
- [ ] æ”¶æ¬¾æ ¸éŠ·æ¸¬è©¦
- [ ] å°å¸³ä½œæ¥­æ¸¬è©¦

### é©—æ”¶æ¸¬è©¦
- [ ] å ´æ™¯1ï¼šæœˆçµåˆ°ç™¼ç¥¨å®Œæ•´æµç¨‹
- [ ] å ´æ™¯2ï¼šéƒ¨åˆ†ä»˜æ¬¾å’Œæ ¸éŠ·
- [ ] å ´æ™¯3ï¼šé€€è²¨æŠ˜è®“è™•ç†
- [ ] å ´æ™¯4ï¼šé€¾æœŸå‚¬æ”¶æµç¨‹

## å¯¦æ–½è¨ˆç•«

### é–‹ç™¼éšæ®µ
| éšæ®µ | æ™‚ç¨‹ | äº¤ä»˜ç‰© |
|------|------|--------|
| éšæ®µ1ï¼šæœˆçµåŠŸèƒ½ | Week 1-2 | æœˆçµä½œæ¥­ã€å¸³å–®ç®¡ç† |
| éšæ®µ2ï¼šç™¼ç¥¨åŠŸèƒ½ | Week 3-4 | ç™¼ç¥¨é–‹ç«‹ã€é›»å­ç™¼ç¥¨ |
| éšæ®µ3ï¼šæ”¶æ¬¾åŠŸèƒ½ | Week 5 | æ”¶æ¬¾ç™»éŒ„ã€æ ¸éŠ· |
| éšæ®µ4ï¼šå°å¸³åŠŸèƒ½ | Week 6 | å°å¸³å–®ã€å·®ç•°åˆ†æ |
| éšæ®µ5ï¼šåˆ†æå ±è¡¨ | Week 7 | å¸³é½¡åˆ†æã€ä¿¡ç”¨ç®¡ç† |
| éšæ®µ6ï¼šç³»çµ±æ•´åˆ | Week 8 | æ•´åˆæ¸¬è©¦ã€ä¸Šç·š |

## é¢¨éšªè©•ä¼°

### æŠ€è¡“é¢¨éšª
| é¢¨éšª | å½±éŸ¿ | æ©Ÿç‡ | ç·©è§£æªæ–½ |
|------|------|------|----------|
| é‡‘é¡è¨ˆç®—éŒ¯èª¤ | æ¥µé«˜ | ä½ | å¤šé‡é©—è­‰ã€å°å¸³æ©Ÿåˆ¶ |
| ç™¼ç¥¨ä¸Šå‚³å¤±æ•— | é«˜ | ä¸­ | é‡è©¦æ©Ÿåˆ¶ã€é›¢ç·šå‚™æ´ |
| è³‡æ–™é·ç§»éŒ¯èª¤ | é«˜ | ä½ | åˆ†æ‰¹é·ç§»ã€é©—è­‰ç¨‹åº |

### æ¥­å‹™é¢¨éšª
| é¢¨éšª | å½±éŸ¿ | æ©Ÿç‡ | ç·©è§£æªæ–½ |
|------|------|------|----------|
| å¸³æ¬¾éŒ¯èª¤å½±éŸ¿é—œä¿‚ | é«˜ | ä½ | å¯©æ ¸æ©Ÿåˆ¶ã€å³æ™‚é€šçŸ¥ |
| ç¾é‡‘æµé æ¸¬å¤±æº– | ä¸­ | ä¸­ | AIé æ¸¬ã€äººå·¥å¯©è¦– |

## éåŠŸèƒ½éœ€æ±‚

### æ€§èƒ½éœ€æ±‚
- æœˆçµè™•ç†1000å®¢æˆ¶ < 30åˆ†é˜
- ç™¼ç¥¨æŸ¥è©¢ < 1ç§’
- å¸³é½¡å ±è¡¨ç”Ÿæˆ < 10ç§’
- æ”¯æ´10è¬ç­†/æœˆäº¤æ˜“é‡

### å®‰å…¨éœ€æ±‚
- è²¡å‹™è³‡æ–™åŠ å¯†
- æ“ä½œå¯©è¨ˆè¿½è¹¤
- é‡‘é¡ä¿®æ”¹é›™é‡ç¢ºèª
- ç™¼ç¥¨é˜²å½æ©Ÿåˆ¶

### å¯ç”¨æ€§éœ€æ±‚
- ç³»çµ±å¯ç”¨æ€§ 99.95%
- æœˆçµæœŸé–“ä¸åœæ©Ÿ
- è³‡æ–™å‚™ä»½æ¯æ—¥åŸ·è¡Œ

## ç›¸é—œæ–‡ä»¶
- [èˆŠç³»çµ±Billingä»£ç¢¼](https://github.com/Tsaitung/tsaitung-mono/tree/main/libs/tsaitung-dashboard/Billing)
- [FAæ¨¡çµ„æ¶æ§‹æ–‡ä»¶](../README.md)
- [è²¡å‹™ä½œæ¥­æµç¨‹](../../docs/finance-process.md)

## è®Šæ›´è¨˜éŒ„
| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ | è®Šæ›´äºº |
|------|------|----------|--------|
| v1.0.0-migration | 2025-08-20 | åˆå§‹è½‰ç§»ç‰ˆæœ¬ | System |

---

**æ–‡ä»¶ç‹€æ…‹**: å¯©æŸ¥ä¸­
**ä¸‹æ¬¡å¯©æŸ¥æ—¥æœŸ**: 2025-09-01