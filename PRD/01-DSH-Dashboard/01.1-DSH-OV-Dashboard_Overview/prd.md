# 儀表板總覽 PRD 文件

## 模組資訊
- **模組代碼**: 01.1-DSH-OV
- **模組名稱**: Dashboard Overview (儀表板總覽)
- **負責人**: 菜蟲農食 ERP 團隊
- **最後更新**: 2025-08-18
- **版本**: v1.0.0

## 模組概述
儀表板總覽模組是整個 ERP 系統的入口點，提供關鍵業務指標的即時視覺化展示、系統狀態監控、以及快速導航功能。讓管理者能夠一目了然地掌握企業營運狀況。

## 業務價值
- 提供即時業務洞察，支援快速決策
- 集中展示關鍵績效指標(KPI)，提升管理效率
- 預警機制降低營運風險
- 個人化儀表板提升用戶體驗

## 功能需求

### FR-DSH-OV-001: 關鍵指標展示
**狀態**: 🟡 開發中
**優先級**: P0

**功能描述**:
在儀表板主頁展示企業關鍵業務指標，包括銷售額、訂單數、庫存狀態、生產進度等，支援即時更新和歷史趨勢對比。

**用戶故事**:
作為管理者，
我希望在登入系統後立即看到今日的關鍵業務數據，
以便快速了解企業營運狀況並做出決策。

**驗收標準**:
- [ ] 顯示今日/本週/本月的銷售額及環比增長率
- [ ] 展示待處理訂單數量和狀態分布
- [ ] 顯示庫存預警項目數量
- [ ] 數據每5分鐘自動更新一次
- [ ] 支援點擊數據卡片查看詳細報表

**技術需求**:
- API 端點：`GET /api/v1/dashboard/metrics`
- 數據模型：DashboardMetrics, MetricHistory
- 權限要求：需要 dashboard.view 權限
- 快取策略：Redis 快取 5 分鐘

**依賴關係**:
- 依賴模組：06-OM (訂單數據), 08-WMS (庫存數據)
- 依賴功能：FR-OM-001, FR-WMS-002

---

### FR-DSH-OV-002: 即時通知中心
**狀態**: 🟡 開發中
**優先級**: P0

**功能描述**:
提供系統級和業務級通知的集中管理，包括系統警告、訂單狀態變更、庫存預警等，支援通知優先級設定和已讀管理。

**用戶故事**:
作為系統用戶，
我希望能夠即時收到重要的業務通知和系統提醒，
以便及時處理異常情況和重要事務。

**驗收標準**:
- [ ] 支援通知分類（系統/業務/個人）
- [ ] 實現通知優先級（緊急/重要/一般）
- [ ] 提供未讀數量標記
- [ ] 支援批量標記已讀
- [ ] 實現通知歷史查詢（保留30天）

**技術需求**:
- API 端點：
  - `GET /api/v1/notifications`
  - `PUT /api/v1/notifications/{id}/read`
  - `POST /api/v1/notifications/mark-all-read`
- WebSocket：實時推送通知
- 數據模型：Notification, NotificationPreference

---

### FR-DSH-OV-003: 快速操作面板
**狀態**: 🔴 未開始
**優先級**: P1

**功能描述**:
提供常用功能的快捷入口，用戶可以自定義快捷操作項目，實現一鍵導航到常用功能模組。

**用戶故事**:
作為日常操作人員，
我希望能快速訪問我常用的功能，
以便提高工作效率。

**驗收標準**:
- [ ] 預設8個常用功能快捷方式
- [ ] 支援用戶自定義快捷方式（最多12個）
- [ ] 支援拖放調整順序
- [ ] 記錄使用頻率並提供智能推薦

---

### FR-DSH-OV-004: 數據視覺化圖表
**狀態**: ✅ 完成
**優先級**: P0

**功能描述**:
提供多種圖表類型展示業務數據，包括折線圖、柱狀圖、圓餅圖等，支援數據篩選和導出。

**用戶故事**:
作為數據分析人員，
我希望通過直觀的圖表了解數據趨勢，
以便進行深入分析和報告。

**驗收標準**:
- [x] 實現至少5種圖表類型
- [x] 支援時間範圍篩選
- [x] 提供圖表數據導出（Excel/PDF）
- [x] 支援圖表配置保存

---

### FR-DSH-OV-005: 個人化設定
**狀態**: ⚪ 規劃中
**優先級**: P2

**功能描述**:
允許用戶自定義儀表板布局、選擇展示的指標卡片、設定刷新頻率等個人化配置。

**用戶故事**:
作為系統用戶，
我希望能根據我的職責和偏好定制儀表板，
以便看到最相關的信息。

**驗收標準**:
- [ ] 支援拖放調整布局
- [ ] 可選擇顯示/隱藏指標卡片
- [ ] 支援主題切換（亮/暗）
- [ ] 配置自動保存到用戶設定

## 非功能需求

### 性能需求
- 頁面載入時間：< 2秒
- 數據更新延遲：< 5秒
- 並發用戶支援：1000+
- 圖表渲染時間：< 1秒

### 安全需求
- 實施基於角色的訪問控制(RBAC)
- 敏感數據脫敏顯示
- 操作日誌記錄
- Session 超時自動登出（30分鐘）

### 可用性需求
- 系統可用性：99.9%
- 支援響應式設計（桌面/平板/手機）
- 瀏覽器兼容性：Chrome 90+, Firefox 88+, Safari 14+, Edge 90+

## 數據模型

### 主要實體
```typescript
interface DashboardMetric {
  id: string;
  type: 'sales' | 'orders' | 'inventory' | 'production';
  value: number;
  unit: string;
  trend: 'up' | 'down' | 'stable';
  changeRate: number;
  timestamp: Date;
  metadata: Record<string, any>;
}

interface Notification {
  id: string;
  userId: string;
  type: 'system' | 'business' | 'personal';
  priority: 'urgent' | 'important' | 'normal';
  title: string;
  content: string;
  isRead: boolean;
  createdAt: Date;
  expiresAt?: Date;
}

interface DashboardLayout {
  userId: string;
  widgets: Widget[];
  theme: 'light' | 'dark';
  refreshInterval: number;
  updatedAt: Date;
}
```

## API 設計

### API 端點列表
| 方法 | 端點 | 描述 | 狀態 |
|------|------|------|------|
| GET | `/api/v1/dashboard/metrics` | 獲取儀表板指標 | 🟡 開發中 |
| GET | `/api/v1/dashboard/charts/{type}` | 獲取圖表數據 | ✅ 完成 |
| GET | `/api/v1/notifications` | 獲取通知列表 | 🟡 開發中 |
| PUT | `/api/v1/notifications/{id}/read` | 標記通知已讀 | 🔴 未開始 |
| GET | `/api/v1/dashboard/layout` | 獲取用戶布局配置 | ⚪ 規劃中 |
| PUT | `/api/v1/dashboard/layout` | 更新用戶布局配置 | ⚪ 規劃中 |

## 實施計畫

### 開發階段
| 階段 | 時程 | 交付物 |
|------|------|--------|
| 階段1：核心功能 | Week 1-2 | 指標展示、基礎圖表 |
| 階段2：通知系統 | Week 3-4 | 通知中心、實時推送 |
| 階段3：個人化 | Week 5-6 | 布局自定義、用戶設定 |
| 階段4：優化 | Week 7-8 | 性能優化、測試完善 |

### 里程碑
- [x] M1：基礎儀表板框架完成 - 2025-08-10
- [ ] M2：核心指標展示完成 - 2025-08-24
- [ ] M3：通知系統上線 - 2025-09-07
- [ ] M4：個人化功能完成 - 2025-09-21

## 變更記錄
| 版本 | 日期 | 變更內容 | 變更人 |
|------|------|----------|--------|
| v1.0.0 | 2025-08-18 | 初始版本創建 | ERP Team |

---

**文件狀態**: 審查中
**下次審查日期**: 2025-08-25