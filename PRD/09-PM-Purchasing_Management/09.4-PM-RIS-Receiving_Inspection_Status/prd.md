# PM-RIS æ”¶è²¨èˆ‡é©—æ”¶ç‹€æ…‹ (Receiving & Inspection Status) PRD

## æ–‡ä»¶è³‡è¨Š
- **ç‰ˆæœ¬**: v1.0.0
- **æœ€å¾Œæ›´æ–°**: 2025-08-25
- **ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
- **è² è²¬äºº**: å¾…æŒ‡æ´¾
- **ç›¸é—œæ¨¡çµ„**: PM-PODM (æ¡è³¼å–®ç®¡ç†), WMS (å€‰å„²ç®¡ç†), QM (å“è³ªç®¡ç†), FA (è²¡å‹™æœƒè¨ˆ)

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 ç›®çš„
å»ºç«‹å®Œæ•´çš„æ”¶è²¨èˆ‡é©—æ”¶ç®¡ç†ç³»çµ±ï¼Œç¢ºä¿æ¡è³¼ç‰©æ–™å“è³ªç¬¦åˆè¦æ±‚ï¼ŒåŠ é€Ÿæ”¶è²¨æµç¨‹ï¼Œé™ä½å“è³ªé¢¨éšªï¼Œæå‡ä¾›æ‡‰éˆæ•ˆç‡ã€‚

### 1.2 ç¯„åœ
- æ”¶è²¨ç™»è¨˜ç®¡ç†
- å“è³ªæª¢é©—æµç¨‹
- é©—æ”¶ç‹€æ…‹è¿½è¹¤
- ç•°å¸¸è™•ç†æ©Ÿåˆ¶
- æ”¶è²¨ç¸¾æ•ˆåˆ†æ

### 1.3 é—œéµåƒ¹å€¼
- æ”¶è²¨æ•ˆç‡æå‡ 60%
- å“è³ªåˆæ ¼ç‡é” 99%
- ç•°å¸¸è™•ç†æ™‚é–“ç¸®çŸ­ 70%
- åº«å­˜æº–ç¢ºç‡é” 99.9%

## 2. åŠŸèƒ½æ€§éœ€æ±‚

### FR-PM-RIS-001: æ”¶è²¨ç™»è¨˜ç®¡ç†
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P0

#### éœ€æ±‚æè¿°
- **æ¢ä»¶/è§¸ç™¼**: è²¨ç‰©åˆ°é”æ”¶è²¨å€
- **è¡Œç‚º**: ç™»è¨˜æ”¶è²¨è³‡è¨Šä¸¦å•Ÿå‹•é©—æ”¶æµç¨‹
- **è³‡æ–™è¼¸å…¥**: 
  - é€è²¨å–®è³‡è¨Š
  - æ¡è³¼å–®è™Ÿ
  - å¯¦éš›åˆ°è²¨æ•¸é‡
  - åŒ…è£ç‹€æ³
  - é‹è¼¸æ–‡ä»¶
- **è³‡æ–™è¼¸å‡º**: 
  - æ”¶è²¨å–®è™Ÿ
  - å·®ç•°å ±å‘Š
  - æª¢é©—é€šçŸ¥
  - å…¥åº«æŒ‡ä»¤
  - æ”¶è²¨ç¢ºèª
- **UIåæ‡‰**: 
  - æƒç¢¼æ”¶è²¨
  - æ‹ç…§è¨˜éŒ„
  - å³æ™‚æ¯”å°
  - ç•°å¸¸æ¨™è¨˜
  - ç°½æ”¶ç¢ºèª
- **ä¾‹å¤–è™•ç†**: 
  - æ•¸é‡å·®ç•°
  - æå£è™•ç†
  - ç„¡å–®æ”¶è²¨
  - éŒ¯èª¤é…é€

#### é©—æ”¶æ¨™æº–
```yaml
- æ¢ä»¶: æƒæé€è²¨å–®æ¢ç¢¼
  é æœŸçµæœ: è‡ªå‹•å¸¶å‡ºæ¡è³¼å–®è³‡è¨Šä¸¦é¡¯ç¤ºå·®ç•°

- æ¢ä»¶: ç™¼ç¾åŒ…è£æå£
  é æœŸçµæœ: æ‹ç…§è¨˜éŒ„ä¸¦é€šçŸ¥ç›¸é—œäººå“¡è™•ç†

- æ¢ä»¶: æ•¸é‡è¶…å‡ºæ¡è³¼å–®
  é æœŸçµæœ: è§¸ç™¼ç•°å¸¸å¯©æ‰¹æµç¨‹
```

### FR-PM-RIS-002: å“è³ªæª¢é©—æµç¨‹
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P0

#### éœ€æ±‚æè¿°
- **æ¢ä»¶/è§¸ç™¼**: æ”¶è²¨ç™»è¨˜å®Œæˆéœ€è¦å“è³ªæª¢é©—
- **è¡Œç‚º**: åŸ·è¡Œå“è³ªæª¢é©—ä¸¦è¨˜éŒ„çµæœ
- **è³‡æ–™è¼¸å…¥**: 
  - æª¢é©—æ¨™æº–
  - æŠ½æ¨£è¨ˆåŠƒ
  - æª¢æ¸¬é …ç›®
  - æ¸¬è©¦æ•¸æ“š
  - æª¢é©—çµè«–
- **è³‡æ–™è¼¸å‡º**: 
  - æª¢é©—å ±å‘Š
  - åˆæ ¼è­‰æ˜
  - ä¸è‰¯è¨˜éŒ„
  - è™•ç†å»ºè­°
  - æ”¾è¡ŒæŒ‡ä»¤
- **UIåæ‡‰**: 
  - æª¢é©—æ¸…å–®
  - æ•¸æ“šéŒ„å…¥
  - çµæœåˆ¤å®š
  - å ±å‘Šç”Ÿæˆ
  - é›»å­ç°½æ ¸
- **ä¾‹å¤–è™•ç†**: 
  - ä¸åˆæ ¼è™•ç†
  - ç‰¹æ¡ç”³è«‹
  - é€€è²¨æµç¨‹
  - ç´¢è³ è™•ç†

### FR-PM-RIS-003: é©—æ”¶ç‹€æ…‹è¿½è¹¤
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P1

#### éœ€æ±‚æè¿°
- **æ¢ä»¶/è§¸ç™¼**: æ”¶è²¨åˆ°é©—æ”¶å®Œæˆå…¨ç¨‹è¿½è¹¤
- **è¡Œç‚º**: å³æ™‚è¿½è¹¤é©—æ”¶å„éšæ®µç‹€æ…‹
- **è³‡æ–™è¼¸å…¥**: 
  - ç‹€æ…‹æ›´æ–°
  - è™•ç†äººå“¡
  - è™•ç†æ™‚é–“
  - è™•ç†çµæœ
  - å‚™è¨»èªªæ˜
- **è³‡æ–™è¼¸å‡º**: 
  - ç‹€æ…‹çœ‹æ¿
  - é€²åº¦å ±å‘Š
  - é€¾æœŸæé†’
  - ç¸¾æ•ˆçµ±è¨ˆ
  - è¿½è¹¤è¨˜éŒ„
- **UIåæ‡‰**: 
  - å³æ™‚ç‹€æ…‹
  - æ™‚é–“è»¸
  - è²¬ä»»äººé¡¯ç¤º
  - é è­¦æç¤º
  - æ­·å²æŸ¥è©¢
- **ä¾‹å¤–è™•ç†**: 
  - é€¾æœŸè™•ç†
  - ç‹€æ…‹å›é€€
  - ç·Šæ€¥è™•ç†
  - æ¬Šé™æ§åˆ¶

### FR-PM-RIS-004: ç•°å¸¸è™•ç†æ©Ÿåˆ¶
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P1

#### éœ€æ±‚æè¿°
- **æ¢ä»¶/è§¸ç™¼**: æ”¶è²¨æˆ–æª¢é©—éç¨‹ç™¼ç¾ç•°å¸¸
- **è¡Œç‚º**: å•Ÿå‹•ç•°å¸¸è™•ç†æµç¨‹ä¸¦è¿½è¹¤è§£æ±º
- **è³‡æ–™è¼¸å…¥**: 
  - ç•°å¸¸é¡å‹
  - ç•°å¸¸æè¿°
  - å½±éŸ¿è©•ä¼°
  - è™•ç†æ–¹æ¡ˆ
  - è²¬ä»»æ­¸å±¬
- **è³‡æ–™è¼¸å‡º**: 
  - ç•°å¸¸å–®è™Ÿ
  - è™•ç†æµç¨‹
  - é€šçŸ¥æé†’
  - çµæ¡ˆå ±å‘Š
  - æ”¹å–„è¿½è¹¤
- **UIåæ‡‰**: 
  - ç•°å¸¸ç™»è¨˜
  - æµç¨‹è¿½è¹¤
  - å”åŒè™•ç†
  - çµæœç¢ºèª
  - çŸ¥è­˜åº«
- **ä¾‹å¤–è™•ç†**: 
  - å‡ç´šæ©Ÿåˆ¶
  - å¤šæ–¹å”èª¿
  - è³ å„Ÿè«‡åˆ¤
  - æ³•å¾‹æ”¯æ´

### FR-PM-RIS-005: æ”¶è²¨ç¸¾æ•ˆåˆ†æ
**ç‹€æ…‹**: ğŸ”´ æœªé–‹å§‹
**å„ªå…ˆç´š**: P2

#### éœ€æ±‚æè¿°
- **æ¢ä»¶/è§¸ç™¼**: å®šæœŸåˆ†ææ”¶è²¨é©—æ”¶ç¸¾æ•ˆ
- **è¡Œç‚º**: åˆ†ææ”¶è²¨æ•ˆç‡å’Œå“è³ªè¡¨ç¾
- **è³‡æ–™è¼¸å…¥**: 
  - æ”¶è²¨æ•¸æ“š
  - æª¢é©—çµæœ
  - ç•°å¸¸è¨˜éŒ„
  - è™•ç†æ™‚æ•ˆ
  - æˆæœ¬è³‡è¨Š
- **è³‡æ–™è¼¸å‡º**: 
  - ç¸¾æ•ˆå ±è¡¨
  - ä¾›æ‡‰å•†è©•åˆ†
  - è¶¨å‹¢åˆ†æ
  - æ”¹å–„å»ºè­°
  - é æ¸¬æ¨¡å‹
- **UIåæ‡‰**: 
  - å„€è¡¨æ¿
  - å°æ¯”åˆ†æ
  - ä¸‹é‘½åŠŸèƒ½
  - è‡ªè¨‚å ±è¡¨
  - è¨‚é–±æ¨é€
- **ä¾‹å¤–è™•ç†**: 
  - è³‡æ–™ç•°å¸¸
  - æŒ‡æ¨™é è­¦
  - è‡ªå‹•å ±å‘Š
  - æ”¹å–„è¿½è¹¤

## 3. ç³»çµ±è¨­è¨ˆ

### 3.1 è³‡æ–™æ¨¡å‹

```typescript
// æ”¶è²¨è¨˜éŒ„
interface ReceivingRecord {
  id: string;
  receivingNo: string;
  
  // åŸºæœ¬è³‡è¨Š
  basicInfo: {
    poNumber: string;
    supplierName: string;
    deliveryNote: string;
    receivedDate: Date;
    receivedBy: string;
    warehouse: string;
  };
  
  // æ”¶è²¨æ˜ç´°
  items: {
    lineNo: number;
    itemCode: string;
    itemName: string;
    
    quantity: {
      ordered: number;
      delivered: number;
      received: number;
      accepted: number;
      rejected: number;
    };
    
    condition: {
      packaging: 'good' | 'damaged' | 'wet';
      appearance: 'normal' | 'abnormal';
      temperature?: number;
      photos?: string[];
    };
    
    inspection: {
      required: boolean;
      method?: 'full' | 'sampling';
      status?: 'pending' | 'in_progress' | 'completed';
    };
  }[];
  
  // é©—æ”¶ç‹€æ…‹
  status: 'receiving' | 'inspecting' | 'completed' | 'rejected';
  
  // æ–‡ä»¶é™„ä»¶
  documents: {
    packingList?: string;
    invoice?: string;
    certificate?: string;
    others?: string[];
  };
}

// æª¢é©—è¨˜éŒ„
interface InspectionRecord {
  id: string;
  inspectionNo: string;
  receivingNo: string;
  
  // æª¢é©—è¨ˆåŠƒ
  plan: {
    standard: string;
    level: 'normal' | 'tightened' | 'reduced';
    sampleSize: number;
    acceptanceQty: number;
    rejectionQty: number;
  };
  
  // æª¢é©—é …ç›®
  items: {
    itemCode: string;
    testItems: {
      name: string;
      specification: string;
      method: string;
      result: any;
      judgment: 'pass' | 'fail';
    }[];
    
    finalResult: 'accepted' | 'rejected' | 'conditional';
    defects?: {
      type: string;
      quantity: number;
      severity: 'critical' | 'major' | 'minor';
    }[];
  }[];
  
  // è™•ç†æ±ºå®š
  decision: {
    action: 'accept' | 'reject' | 'rework' | 'concession';
    approvedBy?: string;
    remarks?: string;
  };
  
  inspectedBy: string;
  inspectedAt: Date;
}
```

### 3.2 API è¨­è¨ˆ

```typescript
// æ”¶è²¨ç®¡ç† API
interface ReceivingAPI {
  POST   /api/pm/receiving                // ç™»è¨˜æ”¶è²¨
  GET    /api/pm/receiving/:id            // æŸ¥è©¢æ”¶è²¨å–®
  PUT    /api/pm/receiving/:id/confirm    // ç¢ºèªæ”¶è²¨
  
  // æª¢é©—ç®¡ç†
  POST   /api/pm/inspection               // å»ºç«‹æª¢é©—
  PUT    /api/pm/inspection/:id/result    // æ›´æ–°çµæœ
  GET    /api/pm/inspection/:id/report    // æª¢é©—å ±å‘Š
  
  // ç•°å¸¸è™•ç†
  POST   /api/pm/receiving/exceptions     // ç™»è¨˜ç•°å¸¸
  PUT    /api/pm/exceptions/:id/resolve   // è™•ç†ç•°å¸¸
}
```

## 4. ç›¸é—œæ–‡ä»¶

- [PM ç¸½é«”æ¶æ§‹](../README.md)
- [æ¡è³¼å–®ç®¡ç† PRD](../09.3-PM-PODM-Purchase_Order_Delivery_Management/prd.md)
- [å“è³ªç®¡ç†ç³»çµ±](../../10-QM-Quality_Management/README.md)

---

**æ–‡ä»¶ç‹€æ…‹**: æœªé–‹å§‹
**ä¸‹æ¬¡å¯©æŸ¥**: 2025-09-01
**è¯çµ¡äºº**: pm@tsaitung.com